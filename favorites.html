<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Favoritos | Briahna's Beauty</title>
    <meta name="description" content="Tus productos favoritos guardados en Briahna's Beauty.">
    <link
        href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Montserrat:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="ambient-orb ambient-orb--1"></div>
    <div class="ambient-orb ambient-orb--2"></div>

    <!-- HEADER -->
    <header id="main-header">
        <div class="container nav-wrapper">
            <div class="menu-toggle"><span></span><span></span><span></span></div>
            <a href="index.html" class="logo">
                <img src="https://res.cloudinary.com/dz9ec6j1b/image/upload/v1770787731/w0oovacpv6a1eoqjqoa5.png"
                    alt="Briahna's Beauty">
                <span>BRIAHNA'S</span>
            </a>
            <nav class="desktop-nav">
                <a href="shop.html" class="nav-link">Tienda</a>
                <a href="shop.html#skincare" class="nav-link">Skincare</a>
                <a href="shop.html#makeup" class="nav-link">Maquillaje</a>
                <a href="favorites.html" class="nav-link" style="color:var(--lilac-deep)">Favoritos</a>
            </nav>
            <div class="nav-icons">
                <button class="icon-btn" id="user-btn" onclick="UI.openAuth()" aria-label="Usuario">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
                        <circle cx="12" cy="7" r="4" />
                    </svg>
                </button>
                <a href="https://www.instagram.com/briahnasbeauty?igsh=MTB3ZGN1Z2RreDJjeA==" target="_blank"
                    class="icon-btn" aria-label="Instagram">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                        <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                        <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                    </svg>
                </a>
                <button class="icon-btn" onclick="UI.openSearch()" aria-label="Buscar">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="9" cy="9" r="7" />
                        <path d="M15 15l4 4" />
                    </svg>
                </button>
                <button class="icon-btn" onclick="UI.openCart()" aria-label="Carrito">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M6 6h12l-1.5 9H7.5L6 6zM6 6L5 1H1" />
                        <circle cx="9" cy="19" r="1" />
                        <circle cx="15" cy="19" r="1" />
                    </svg>
                    <span class="badge cart-badge" style="display:none">0</span>
                </button>
            </div>
        </div>
    </header>

    <!-- ‚ïê‚ïê‚ïê AUTH MODAL ‚ïê‚ïê‚ïê -->
    <div class="modal-overlay" id="auth-modal" style="display:none">
        <div class="auth-modal">
            <button class="modal-close" onclick="UI.closeAuth()">‚úï</button>

            <!-- Login Form -->
            <div id="login-form">
                <h2>Iniciar Sesi√≥n</h2>
                <input type="email" id="login-email" placeholder="Email">
                <input type="password" id="login-password" placeholder="Contrase√±a">
                <button onclick="Auth.login()" class="btn-primary"
                    style="width:100%; margin-bottom:12px">Entrar</button>
                <p style="text-align:center; margin-bottom:12px"><a onclick="Auth.showRecovery()"
                        style="color:var(--text-muted); cursor:pointer; font-size:0.85rem">¬øOlvidaste tu contrase√±a?</a>
                </p>
                <p style="text-align:center; color:var(--text-muted); font-size:0.9rem">¬øNo tienes cuenta? <a
                        onclick="Auth.showRegister()"
                        style="color:var(--lilac-deep); cursor:pointer; font-weight:500">Reg√≠strate</a></p>
            </div>

            <!-- Recovery Form -->
            <div id="recovery-form" style="display:none">
                <h2>Recuperar Contrase√±a</h2>
                <p style="color:var(--text-muted); font-size:0.9rem; margin-bottom:20px">Ingresa tu email y te
                    enviaremos un enlace para restablecer tu contrase√±a.</p>
                <input type="email" id="recovery-email" placeholder="Email">
                <button onclick="Auth.resetPassword()" class="btn-primary" style="width:100%; margin-bottom:12px">Enviar
                    Enlace</button>
                <p style="text-align:center; color:var(--text-muted); font-size:0.9rem"><a onclick="Auth.showLogin()"
                        style="color:var(--lilac-deep); cursor:pointer; font-weight:500">Volver al inicio</a></p>
            </div>

            <!-- Register Form -->
            <div id="register-form" style="display:none">
                <h2>Crear Cuenta</h2>
                <input type="text" id="register-name" placeholder="Nombre completo">
                <input type="email" id="register-email" placeholder="Email">
                <input type="password" id="register-password" placeholder="Contrase√±a (min 6 caracteres)">

                <div
                    style="background:var(--lilac-whisper); border-left:3px solid var(--lilac); padding:10px 15px; margin-bottom:15px; border-radius:4px">
                    <p style="font-size:0.85rem; color:var(--text-secondary); margin:0">
                        <i class="fas fa-info-circle"></i> <strong>Importante:</strong> Al registrarte, recibir√°s un
                        correo de verificaci√≥n. Si no lo ves, <u>revisa tu carpeta de SPAM</u>.
                    </p>
                </div>

                <button onclick="Auth.register()" class="btn-primary"
                    style="width:100%; margin-bottom:12px">Registrar</button>
                <p style="text-align:center; color:var(--text-muted); font-size:0.9rem">¬øYa tienes cuenta? <a
                        onclick="Auth.showLogin()"
                        style="color:var(--lilac-deep); cursor:pointer; font-weight:500">Inicia sesi√≥n</a></p>
            </div>
        </div>
    </div>

    <!-- CART SIDEBAR -->
    <div class="cart-overlay" onclick="UI.closeCart()"></div>
    <aside class="cart-sidebar">
        <div class="cart-header">
            <h3>Tu Carrito</h3><button class="cart-close" onclick="UI.closeCart()">‚úï</button>
        </div>
        <div class="cart-items">
            <div class="cart-empty">
                <div class="cart-empty__icon">üõç</div>
                <p>Tu carrito est√° vac√≠o</p>
            </div>
        </div>
        <div class="cart-footer" style="display:none">
            <div class="cart-summary"></div><button class="cart-checkout" onclick="Cart.checkoutWhatsApp()">Finalizar
                Compra</button>
        </div>
    </aside>

    <!-- QUICK VIEW MODAL -->
    <div class="modal-overlay" id="quick-view-modal">
        <div class="quick-view">
            <div class="quick-view__gallery"><img src="" alt=""><button class="quick-view__close"
                    onclick="UI.closeQuickView()">‚úï</button></div>
            <div class="quick-view__info"></div>
        </div>
    </div>

    <main style="padding-top:160px;min-height:80vh">
        <div class="container">
            <div class="section-header reveal">
                <div class="eyebrow">Tu Colecci√≥n Personal</div>
                <h2>Mis Favoritos</h2>
                <p id="fav-subtitle">Los productos que has guardado con ‚ô•</p>
            </div>

            <div class="product-grid" id="favorites-grid"></div>

            <div id="empty-fav" style="display:none;text-align:center;padding:80px 20px">
                <div style="font-size:4rem;margin-bottom:20px;opacity:.5">‚ô•</div>
                <h3
                    style="font-family:var(--font-display);font-size:1.8rem;font-weight:300;font-style:italic;margin-bottom:12px">
                    A√∫n no tienes favoritos</h3>
                <p style="color:var(--text-muted);margin-bottom:28px">Explora nuestra tienda y guarda los productos que
                    m√°s te gusten</p>
                <a href="shop.html" class="btn-primary">Explorar Tienda ‚Üí</a>
            </div>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-brand">
                    <h3>Briahna's Beauty</h3>
                    <p>Tu tienda de confianza para productos de belleza y cosm√©ticos en Honduras.</p>
                    <div class="footer-socials">
                        <a href="https://www.facebook.com/share/1AK19UCqoa/" target="_blank" class="social-icon"><i
                                class="fab fa-facebook-f"></i></a>
                        <a href="https://www.instagram.com/briahnasbeauty" target="_blank" class="social-icon"><i
                                class="fab fa-instagram"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-tiktok"></i></a>
                        <a href="https://wa.me/50497738535" target="_blank" class="social-icon"><i
                                class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h4>Categor√≠as</h4>
                    <a href="shop.html?cat=makeup">Maquillaje</a>
                    <a href="shop.html?cat=skincare">Skincare</a>
                    <a href="shop.html?cat=haircare">Cabello</a>
                    <a href="shop.html?cat=fragrance">Fragancias</a>
                    <a href="shop.html?cat=tools">Accesorios</a>
                </div>
                <div class="footer-col">
                    <h4>Informaci√≥n</h4>
                    <a href="#">Sobre Nosotros</a>
                    <a href="#">Env√≠os</a>
                    <a href="#">Pol√≠ticas</a>
                    <a href="#">Preguntas Frecuentes</a>
                    <a href="#">Contacto</a>
                </div>
                <div class="footer-col footer-contact">
                    <h4>Contacto</h4>
                    <p><i class="fas fa-map-marker-alt"></i> Tegucigalpa, Honduras</p>
                    <p><i class="fas fa-phone"></i> +504 9773-8535</p>
                    <p><i class="fas fa-envelope"></i> briahnasbeauty@gmail.com</p>
                    <p><i class="fab fa-whatsapp"></i> WhatsApp: +504 9773-8535</p>
                </div>
            </div>
            <div class="footer-bottom">
                <span>¬© 2026 Briahna's Beauty. Todos los derechos reservados.</span>
                <span>Desarrollado con ‚ô• en Honduras</span>
            </div>
        </div>
    </footer>

    <!-- WhatsApp Floating Button -->
    <a href="https://wa.me/50497738535" class="whatsapp-float" target="_blank">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Font Awesome for Footer Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/auth.js"></script>

    <script src="js/product-generator.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/products.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            Auth.init();
            Cart.init();
            Favorites.init();
            Products.init();
            UI.initScrollReveal();
            UI.initHeaderScroll();
            UI.initMobileMenu();

            Cart.subscribe(UI.renderCart);
            Favorites.subscribe(UI.renderFavBadge);

            function renderFavorites() {
                const favProducts = Products.getFavoriteProducts();
                const grid = document.getElementById('favorites-grid');
                const empty = document.getElementById('empty-fav');
                const subtitle = document.getElementById('fav-subtitle');

                if (favProducts.length === 0) {
                    grid.style.display = 'none';
                    empty.style.display = 'block';
                    return;
                }

                grid.style.display = '';
                empty.style.display = 'none';
                subtitle.textContent = `${favProducts.length} producto${favProducts.length > 1 ? 's' : ''} guardado${favProducts.length > 1 ? 's' : ''}`;

                const stars = r => '‚òÖ'.repeat(Math.floor(r)) + '‚òÜ'.repeat(5 - Math.floor(r));
                grid.innerHTML = favProducts.map(p => {
                    let imageUrl = (p.images && p.images.length > 0) ? p.images[0] : p.image;
                    if (!imageUrl || imageUrl.includes('via.placeholder.com')) {
                        imageUrl = 'https://placehold.co/400x400/e1bee7/5b2c6f?text=Sin+Imagen';
                    }
                    const mainImage = imageUrl;
                    return `
            <div class="product-card reveal" data-id="${p.id}">
                <div class="product-card__image">
                    <img src="${mainImage}" alt="${p.name}" loading="lazy">
                    <div class="product-card__actions">
                        <button class="action-btn favorited" onclick="event.stopPropagation();Favorites.toggle('${p.id}');" title="Quitar de favoritos">‚ô•</button>
                        <button class="action-btn action-btn--cart" onclick="event.stopPropagation();Products.addToCart('${p.id}')">üõí A√±adir</button>
                        <button class="action-btn" onclick="event.stopPropagation();UI.openQuickView('${p.id}')" title="Vista r√°pida">üëÅ</button>
                    </div>
                </div>
                <div class="product-card__body">
                    <div class="product-card__category">${p.category || 'Categor√≠a'}</div>
                    <div class="product-card__name">${p.name || 'Sin nombre'}</div>
                    <div class="product-card__price-row" style="margin: 8px 0;">
                        <span class="product-card__price">L. ${(p.price || 0).toFixed(2)}</span>
                    </div>
                    <div class="product-card__rating"><span class="stars" style="color:var(--lilac-mid)">${stars(p.rating || 5)}</span> (${p.reviews || 0})</div>
                    <button class="btn-remove-fav" onclick="event.stopPropagation();Favorites.toggle('${p.id}')" title="Eliminar de favoritos">
                        <i class="fas fa-trash-alt"></i> Eliminar
                    </button>
                </div>
            </div>`;
                }).join('');

                UI.initScrollReveal();
            }

            // Make renderFavorites global so inline onclick can call it
            window.renderFavorites = renderFavorites;
            renderFavorites();
            Favorites.subscribe(() => renderFavorites());

            document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { UI.closeCart(); UI.closeQuickView(); } });
            document.getElementById('quick-view-modal')?.addEventListener('click', (e) => { if (e.target === e.currentTarget) UI.closeQuickView(); });
        });
    </script>
</body>

</html>